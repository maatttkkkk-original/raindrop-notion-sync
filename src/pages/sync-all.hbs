<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Full Sync - Smart Diff Technology</title>
  
  <!-- CSS Files -->
  <link rel="stylesheet" href="/public/styles/design-system.css">
  <link rel="stylesheet" href="/public/styles/sync.css">
  <link rel="stylesheet" href="/public/styles/components.css">
  
  <!-- Preload critical assets -->
  <link rel="preload" href="/public/fonts/helvetica-neue.woff2" as="font" type="font/woff2" crossorigin>
</head>
<body>
  <div class="container">
    <main class="sync-page" role="main">
      <!-- Status Indicator -->
      <div 
        id="sync-status-indicator" 
        class="sync-status-indicator not-synced" 
        role="img" 
        aria-label="Sync status indicator"
      ></div>
      
      <!-- Header -->
      <header class="sync-header">
        <h1 class="sync-title text-huge text-primary">
          Full Sync - Smart Diff
        </h1>
        
        <div class="sync-description">
          <p><strong>ðŸ§  Smart Diff Technology:</strong> Analyzes all your data and processes only what needs changes.</p>
          <p><strong>âš¡ 10x Faster:</strong> Typical full sync completes in 1-2 minutes instead of 10+ minutes.</p>
          <p><strong>ðŸŽ¯ Efficient:</strong> Only processes differences, not all 1,300+ items.</p>
        </div>
      </header>
      
      <!-- Sync Controls -->
      <div id="sync-controls" class="sync-controls">
        <button 
          id="start-sync-button" 
          class="sync-button" 
          type="button"
          aria-describedby="sync-description"
        >
          Start Smart Diff Sync
        </button>
        
        <a 
          href="/?password={{password}}" 
          class="back-button"
          aria-label="Return to dashboard"
        >
          Back â†¤
        </a>
      </div>
      
      <!-- Sync Progress (Hidden Initially) -->
      <div id="sync-progress" class="sync-progress hidden" role="region" aria-live="polite">
        <!-- Connection Status -->
        <div id="connection-status" class="connection-status connecting">
          Connecting to sync stream...
        </div>
        
        <!-- Progress Stats -->
        <div class="sync-stats" role="status">
          <div class="sync-stat added">
            <span id="added-count" class="sync-stat-number">0</span>
            <span>added</span>
          </div>
          <div class="sync-stat updated">
            <span id="updated-count" class="sync-stat-number">0</span>
            <span>updated</span>
          </div>
          <div class="sync-stat skipped">
            <span id="skipped-count" class="sync-stat-number">0</span>
            <span>skipped</span>
          </div>
          <div class="sync-stat deleted">
            <span id="deleted-count" class="sync-stat-number">0</span>
            <span>deleted</span>
          </div>
        </div>
        
        <!-- Efficiency Display -->
        <div class="efficiency-display">
          <div class="efficiency-header">
            <span>Smart Diff Efficiency:</span>
            <span id="efficiency-percentage">Analyzing...</span>
          </div>
          <div class="efficiency-details">
            <strong>Processing:</strong>
            <span id="operations-count">Calculating differences...</span>
          </div>
          <div class="efficiency-status" id="efficiency-status">
            ðŸ§  Smart Diff Technology Active
          </div>
        </div>
        
        <!-- Live Updates -->
        <div class="live-updates" role="log" aria-live="polite" aria-label="Sync progress updates">
          <div id="sync-updates">
            <div class="sync-update info">ðŸš€ Ready to start Smart Diff Sync...</div>
          </div>
        </div>
        
        <!-- Cancel Button -->
        <div class="sync-controls">
          <button 
            id="cancel-sync-button" 
            class="cancel-button" 
            type="button"
            aria-label="Cancel sync operation"
          >
            Cancel Sync
          </button>
        </div>
      </div>
      
      <!-- Decorative Lines -->
      <div class="decorative-lines" aria-hidden="true">
        <div class="decorative-line"></div>
        <div class="decorative-line"></div>
        <div class="decorative-line"></div>
        <div class="decorative-line"></div>
        <div class="decorative-line"></div>
        <div class="decorative-line"></div>
        <div class="decorative-line"></div>
        <div class="decorative-line"></div>
      </div>
    </main>
  </div>
  
  <!-- Loading Overlay -->
  <div id="loading-overlay" class="loading-overlay d-none" aria-hidden="true">
    <div class="loading-spinner-large"></div>
  </div>
  
  <!-- JavaScript -->
  <script src="/public/scripts/utils.js"></script>
  <script src="/public/scripts/prevention.js"></script>
  <script src="/public/scripts/sync.js"></script>
  
  <script>
    // Initialize sync page with enhanced prevention
    document.addEventListener('DOMContentLoaded', function() {
      const password = '{{password}}';
      const mode = '{{mode}}';
      
      if (window.SyncPage) {
        window.SyncPage.init(password, mode);
      }
    });
  </script>
</body>
</html>