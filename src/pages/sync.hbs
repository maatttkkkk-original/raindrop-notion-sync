<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>{{#if (eq mode "reset")}}Reset & Full Sync{{else if (eq mode "incremental")}}Incremental Sync{{else}}Smart Sync{{/if}} - Raindrop Notion</title>
  
  <link rel="stylesheet" href="/public/styles/design-system.css?v=2024-05-28-001">
  <link rel="stylesheet" href="/public/styles/components.css?v=2024-05-28-001">
  <link rel="stylesheet" href="/public/styles/dashboard.css?v=2024-05-28-001">
</head>
<body>
  <main class="dashboard-8-section" id="main-content" role="main">
    <!-- Section 1: Title -->
    <div class="dashboard-section section-1 bg-white">
      <div class="section-content">
        <h1 class="text-huge sync-title" id="sync-title">
          {{#if (eq mode "reset")}}
            Reset & Full Sync
          {{else if (eq mode "incremental")}}
            Incremental Sync
          {{else}}
            Smart Sync
          {{/if}}
        </h1>
      </div>
    </div>
    
    <div class="dashboard-divider"></div>
    
    <!-- Section 2: Action Button -->
    <div class="dashboard-section section-2 {{#if (eq mode "reset")}}bg-red{{else}}bg-yellow{{/if}}" id="action-section">
      <div class="section-content">
        <button id="syncBtn" class="section-action-button text-huge {{#if (eq mode "reset")}}text-white{{else}}text-black{{/if}}" type="button">
          {{#if (eq mode "reset")}}
            Start Reset & Full Sync
          {{else if (eq mode "incremental")}}
            Start Incremental Sync
          {{else}}
            Start Smart Sync
          {{/if}}
        </button>
      </div>
    </div>
    
    <div class="dashboard-divider"></div>
    
    <!-- Section 3: Description -->
    <div class="dashboard-section section-3 bg-white" id="description-section">
      <div class="section-content">
        <div class="text-large" id="sync-description">
          {{#if (eq mode "reset")}}
            ⚠️ This will delete all existing Notion pages and recreate them
          {{else if (eq mode "incremental")}}
            Sync only bookmarks from the last {{daysBack}} days
          {{else}}
            Smart analysis - only sync what needs to change
          {{/if}}
        </div>
      </div>
    </div>
    
    <div class="dashboard-divider"></div>
    
    <!-- Section 4: Progress -->
    <div class="dashboard-section section-4 bg-white" id="progress-section">
      <div class="section-content">
        <div class="sync-progress">
          <div class="progress-bar" style="display: none;">
            <div class="progress-fill" id="progress-fill"></div>
          </div>
          <div class="text-medium" id="progress-text">Ready to sync...</div>
        </div>
      </div>
    </div>
    
    <div class="dashboard-divider"></div>
    
    <!-- Section 5: Stats -->
    <div class="dashboard-section section-5 bg-white" id="stats-section">
      <div class="section-content">
        <div class="sync-stats" id="sync-stats" style="display: none;">
          <div class="stat-group">
            <div class="stat-item">
              <span class="stat-number text-large" id="added-count">0</span>
              <span class="stat-label text-small">Added</span>
            </div>
            <div class="stat-item">
              <span class="stat-number text-large" id="updated-count">0</span>
              <span class="stat-label text-small">Updated</span>
            </div>
            <div class="stat-item">
              <span class="stat-number text-large" id="deleted-count">0</span>
              <span class="stat-label text-small">Deleted</span>
            </div>
            <div class="stat-item">
              <span class="stat-number text-large" id="failed-count">0</span>
              <span class="stat-label text-small">Failed</span>
            </div>
          </div>
        </div>
      </div>
    </div>
    
    <div class="dashboard-divider"></div>
    
    <!-- Section 6: Efficiency Display -->
    <div class="dashboard-section section-6 bg-white" id="efficiency-section">
      <div class="section-content">
        <div class="efficiency-display" id="efficiency-display" style="display: none;">
          <div class="text-large">
            <span id="efficiency-percentage">--</span>% Efficiency
          </div>
          <div class="text-small" id="efficiency-status">Calculating efficiency...</div>
        </div>
      </div>
    </div>
    
    <div class="dashboard-divider"></div>
    
    <!-- Section 7: Log Area -->
    <div class="dashboard-section section-7 bg-white log-section" id="log-section">
      <div class="section-content">
        <div 
          id="status" 
          class="status-display" 
          role="log" 
          aria-live="polite" 
          aria-label="Sync progress updates"
          style="display: none; height: 100%; overflow-y: auto;"
        ></div>
      </div>
    </div>
    
    <div class="dashboard-divider"></div>
    
    <!-- Section 8: Back Button -->
    <div class="dashboard-section section-8 bg-light-gray back-section">
      <div class="section-content">
        <a href="/?password={{password}}" class="back-button text-large">Back ↺</a>
      </div>
    </div>
  </main>

  <script src="/public/scripts/utils.js"></script>
  <script src="/public/scripts/sync.js"></script>
  <script src="/public/scripts/enhancements.js"></script>
</body>
</html>